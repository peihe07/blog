<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>安全協定 - Peihe&#39;s blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="TLS/SSL (Transport Layer Security)

TLS 握手過程：

ClientHello：客戶端發送支援的加密算法和隨機數
ServerHello：伺服器選擇加密算法並發送隨機數和證書
證書驗證：客戶端驗證伺服器證書
金鑰交換：使用非對稱加密建立共享密鑰
完成握手：雙方使用對稱加密保護後續通訊


加密類型：

對稱加密：AES、ChaCha20 等，用於資料傳輸
非對稱加密：RSA、ECC，用於金鑰交換
雜湊函數：SHA-256、SHA-384，用於訊息完整性


TLS 版本演進：

TLS 1.0/1.1：已棄用，存在安全漏洞
TLS 1.2：目前廣泛使用，支援多種加密套件
TLS 1.3：最新版本，大幅改進安全性和效能


Perfect Forward Secrecy (PFS)：即使私鑰洩露，之前的通訊仍安全
TLS 1.3 改進：

減少握手往返次數（1-RTT）
移除不安全的加密算法
握手加密
0-RTT 恢復功能（權衡安全性與性能）


證書驗證機制：

證書鏈：根 CA → 中間 CA → 終端實體證書
CRL (Certificate Revocation List)：憑證撤銷清單
OCSP (Online Certificate Status Protocol)：線上憑證狀態協定
SNI (Server Name Indication)：支援單一 IP 多域名證書


安全增強功能：

HSTS (HTTP Strict Transport Security)：強制瀏覽器使用 HTTPS
Certificate Pinning：證書釘選，防止憑證攻擊



SSH (Secure Shell)

SSH 版本差異：

SSH-1：已棄用，存在安全漏洞
SSH-2：目前標準版本，安全性大幅改善


認證方式：

密碼認證：簡單但安全性較低
公鑰認證：高安全性，使用密鑰對
雙因素認證：結合密鑰和密碼/驗證碼


密鑰類型比較：

RSA：傳統算法，密鑰長度 2048/4096 bits
DSA：已不推薦使用
ECDSA：橢圓曲線算法，較短密鑰長度
Ed25519：新一代橢圓曲線算法，推薦使用


連接建立流程：

TCP 連接建立（預設端口 22）
協議版本協商
演算法協商
金鑰交換
用戶認證


主機身份驗證：

known_hosts 檔案：儲存已知主機的公鑰指紋
主機密鑰檢查：防止中間人攻擊
首次連接警告：新主機連接時的安全提示


SSH 隧道：

本地轉發：-L 選項，將本地端口轉發到遠端
遠程轉發：-R 選項，將遠端端口轉發到本地
動態轉發：-D 選項，建立 SOCKS 代理


SSH 配置與管理：

~/.ssh/config 文件配置
主機別名設定
密鑰管理與 ssh-agent
連接池和復用 (ControlMaster)
免密碼登入設定



IPSec (Internet Protocol Security)

協議組件：

AH (Authentication Header)：僅提供認證和完整性，不加密
ESP (Encapsulating Security Payload)：提供認證、完整性和加密


運行模式：

傳輸模式：僅加密 IP 封包的負載，保留原始 IP 標頭
隧道模式：加密整個 IP 封包並添加新的 IP 標頭


安全關聯 (SA)：定義加密算法、密鑰和安全參數
IKE (Internet Key Exchange)：

IKEv1：傳統版本，較複雜的協商過程
IKEv2：改進版本，更簡潔且支援移動性
第一階段：建立 ISAKMP SA，保護第二階段
第二階段：建立 IPSec SA


NAT 穿透：

NAT-T (NAT Traversal)：解決 NAT 環境下的 IPSec 連接問題
UDP 封裝：將 ESP 封包封裝在 UDP 中通過 NAT


實際應用：

站點對站點 VPN：連接不同辦公室網路
遠程訪問 VPN：員工在外部存取公司網路
L2TP/IPSec VPN：結合 L2TP 隧道和 IPSec 加密


配置考量：

加密算法選擇：AES、3DES 等對稱加密
認證方式：PSK (Pre-Shared Key) 或憑證
完整性驗證：SHA-1、SHA-256 等雜湊算法


" />
	<meta property="og:image" content="https://hqasco.deta.dev/img?url=https://www.peihe07.uno/notes/2025-03-27-security_protocols/"/>
	<meta property="twitter:image" content="https://hqasco.deta.dev/img?url=https://www.peihe07.uno/notes/2025-03-27-security_protocols/"/>
	<meta property="twitter:card" content="summary_large_image"/>
	<meta property="og:url" content="https://www.peihe07.uno/notes/2025-03-27-security_protocols/">
  <meta property="og:site_name" content="Peihe&#39;s blog">
  <meta property="og:title" content="安全協定">
  <meta property="og:description" content="TLS/SSL (Transport Layer Security) TLS 握手過程： ClientHello：客戶端發送支援的加密算法和隨機數 ServerHello：伺服器選擇加密算法並發送隨機數和證書 證書驗證：客戶端驗證伺服器證書 金鑰交換：使用非對稱加密建立共享密鑰 完成握手：雙方使用對稱加密保護後續通訊 加密類型： 對稱加密：AES、ChaCha20 等，用於資料傳輸 非對稱加密：RSA、ECC，用於金鑰交換 雜湊函數：SHA-256、SHA-384，用於訊息完整性 TLS 版本演進： TLS 1.0/1.1：已棄用，存在安全漏洞 TLS 1.2：目前廣泛使用，支援多種加密套件 TLS 1.3：最新版本，大幅改進安全性和效能 Perfect Forward Secrecy (PFS)：即使私鑰洩露，之前的通訊仍安全 TLS 1.3 改進： 減少握手往返次數（1-RTT） 移除不安全的加密算法 握手加密 0-RTT 恢復功能（權衡安全性與性能） 證書驗證機制： 證書鏈：根 CA → 中間 CA → 終端實體證書 CRL (Certificate Revocation List)：憑證撤銷清單 OCSP (Online Certificate Status Protocol)：線上憑證狀態協定 SNI (Server Name Indication)：支援單一 IP 多域名證書 安全增強功能： HSTS (HTTP Strict Transport Security)：強制瀏覽器使用 HTTPS Certificate Pinning：證書釘選，防止憑證攻擊 SSH (Secure Shell) SSH 版本差異： SSH-1：已棄用，存在安全漏洞 SSH-2：目前標準版本，安全性大幅改善 認證方式： 密碼認證：簡單但安全性較低 公鑰認證：高安全性，使用密鑰對 雙因素認證：結合密鑰和密碼/驗證碼 密鑰類型比較： RSA：傳統算法，密鑰長度 2048/4096 bits DSA：已不推薦使用 ECDSA：橢圓曲線算法，較短密鑰長度 Ed25519：新一代橢圓曲線算法，推薦使用 連接建立流程： TCP 連接建立（預設端口 22） 協議版本協商 演算法協商 金鑰交換 用戶認證 主機身份驗證： known_hosts 檔案：儲存已知主機的公鑰指紋 主機密鑰檢查：防止中間人攻擊 首次連接警告：新主機連接時的安全提示 SSH 隧道： 本地轉發：-L 選項，將本地端口轉發到遠端 遠程轉發：-R 選項，將遠端端口轉發到本地 動態轉發：-D 選項，建立 SOCKS 代理 SSH 配置與管理： ~/.ssh/config 文件配置 主機別名設定 密鑰管理與 ssh-agent 連接池和復用 (ControlMaster) 免密碼登入設定 IPSec (Internet Protocol Security) 協議組件： AH (Authentication Header)：僅提供認證和完整性，不加密 ESP (Encapsulating Security Payload)：提供認證、完整性和加密 運行模式： 傳輸模式：僅加密 IP 封包的負載，保留原始 IP 標頭 隧道模式：加密整個 IP 封包並添加新的 IP 標頭 安全關聯 (SA)：定義加密算法、密鑰和安全參數 IKE (Internet Key Exchange)： IKEv1：傳統版本，較複雜的協商過程 IKEv2：改進版本，更簡潔且支援移動性 第一階段：建立 ISAKMP SA，保護第二階段 第二階段：建立 IPSec SA NAT 穿透： NAT-T (NAT Traversal)：解決 NAT 環境下的 IPSec 連接問題 UDP 封裝：將 ESP 封包封裝在 UDP 中通過 NAT 實際應用： 站點對站點 VPN：連接不同辦公室網路 遠程訪問 VPN：員工在外部存取公司網路 L2TP/IPSec VPN：結合 L2TP 隧道和 IPSec 加密 配置考量： 加密算法選擇：AES、3DES 等對稱加密 認證方式：PSK (Pre-Shared Key) 或憑證 完整性驗證：SHA-1、SHA-256 等雜湊算法">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2025-03-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-03-27T00:00:00+00:00">
    <meta property="article:tag" content="Protocol">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="安全協定">
  <meta name="twitter:description" content="TLS/SSL (Transport Layer Security) TLS 握手過程： ClientHello：客戶端發送支援的加密算法和隨機數 ServerHello：伺服器選擇加密算法並發送隨機數和證書 證書驗證：客戶端驗證伺服器證書 金鑰交換：使用非對稱加密建立共享密鑰 完成握手：雙方使用對稱加密保護後續通訊 加密類型： 對稱加密：AES、ChaCha20 等，用於資料傳輸 非對稱加密：RSA、ECC，用於金鑰交換 雜湊函數：SHA-256、SHA-384，用於訊息完整性 TLS 版本演進： TLS 1.0/1.1：已棄用，存在安全漏洞 TLS 1.2：目前廣泛使用，支援多種加密套件 TLS 1.3：最新版本，大幅改進安全性和效能 Perfect Forward Secrecy (PFS)：即使私鑰洩露，之前的通訊仍安全 TLS 1.3 改進： 減少握手往返次數（1-RTT） 移除不安全的加密算法 握手加密 0-RTT 恢復功能（權衡安全性與性能） 證書驗證機制： 證書鏈：根 CA → 中間 CA → 終端實體證書 CRL (Certificate Revocation List)：憑證撤銷清單 OCSP (Online Certificate Status Protocol)：線上憑證狀態協定 SNI (Server Name Indication)：支援單一 IP 多域名證書 安全增強功能： HSTS (HTTP Strict Transport Security)：強制瀏覽器使用 HTTPS Certificate Pinning：證書釘選，防止憑證攻擊 SSH (Secure Shell) SSH 版本差異： SSH-1：已棄用，存在安全漏洞 SSH-2：目前標準版本，安全性大幅改善 認證方式： 密碼認證：簡單但安全性較低 公鑰認證：高安全性，使用密鑰對 雙因素認證：結合密鑰和密碼/驗證碼 密鑰類型比較： RSA：傳統算法，密鑰長度 2048/4096 bits DSA：已不推薦使用 ECDSA：橢圓曲線算法，較短密鑰長度 Ed25519：新一代橢圓曲線算法，推薦使用 連接建立流程： TCP 連接建立（預設端口 22） 協議版本協商 演算法協商 金鑰交換 用戶認證 主機身份驗證： known_hosts 檔案：儲存已知主機的公鑰指紋 主機密鑰檢查：防止中間人攻擊 首次連接警告：新主機連接時的安全提示 SSH 隧道： 本地轉發：-L 選項，將本地端口轉發到遠端 遠程轉發：-R 選項，將遠端端口轉發到本地 動態轉發：-D 選項，建立 SOCKS 代理 SSH 配置與管理： ~/.ssh/config 文件配置 主機別名設定 密鑰管理與 ssh-agent 連接池和復用 (ControlMaster) 免密碼登入設定 IPSec (Internet Protocol Security) 協議組件： AH (Authentication Header)：僅提供認證和完整性，不加密 ESP (Encapsulating Security Payload)：提供認證、完整性和加密 運行模式： 傳輸模式：僅加密 IP 封包的負載，保留原始 IP 標頭 隧道模式：加密整個 IP 封包並添加新的 IP 標頭 安全關聯 (SA)：定義加密算法、密鑰和安全參數 IKE (Internet Key Exchange)： IKEv1：傳統版本，較複雜的協商過程 IKEv2：改進版本，更簡潔且支援移動性 第一階段：建立 ISAKMP SA，保護第二階段 第二階段：建立 IPSec SA NAT 穿透： NAT-T (NAT Traversal)：解決 NAT 環境下的 IPSec 連接問題 UDP 封裝：將 ESP 封包封裝在 UDP 中通過 NAT 實際應用： 站點對站點 VPN：連接不同辦公室網路 遠程訪問 VPN：員工在外部存取公司網路 L2TP/IPSec VPN：結合 L2TP 隧道和 IPSec 加密 配置考量： 加密算法選擇：AES、3DES 等對稱加密 認證方式：PSK (Pre-Shared Key) 或憑證 完整性驗證：SHA-1、SHA-256 等雜湊算法">
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	
	
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/projects.css" />
	
	
		
		<link rel="stylesheet" type="text/css" href="/css/light.css">
		
		<link rel="stylesheet" type="text/css" href="/css/font.css">
		
		<link rel="stylesheet" type="text/css" href="/css/main.css">
		
		<link rel="stylesheet" type="text/css" href="/css/syntax.css">
		
	<script src="//instant.page/5.1.0" type="module" integrity="sha384-by67kQnR+pyfy8yWP4kPO12fHKRLHZPfEsiSXR8u2IKcTdxD805MGUXBzVPnkLHw"></script>
</head>
<body>
  <header class="site-header">
    <div class="site-title">
      <a href="https://www.peihe07.uno/">Peihe&#39;s blog</a>
    </div>
    <nav class="main-menu">
      
        <a href="/">Home</a>
      
        <a href="/writings">Writings</a>
      
        <a href="/projects">Projects</a>
      
        <a href="/notes">Notes</a>
      
        <a href="/about">About</a>
      
    </nav>
  </header><body>
        <div class="content">
<main>
  <article>
    <div class="post-container">
      
      <div class="post-content">
        <div class="title">
          <h1 class="title">安全協定</h1>
          <div class="meta">Posted on Mar 27, 2025</div>
        </div>
        
        <section class="body">
          <h1 id="tlsssl-transport-layer-security">TLS/SSL (Transport Layer Security)</h1>
<ul>
<li><strong>TLS 握手過程</strong>：
<ol>
<li><strong>ClientHello</strong>：客戶端發送支援的加密算法和隨機數</li>
<li><strong>ServerHello</strong>：伺服器選擇加密算法並發送隨機數和證書</li>
<li><strong>證書驗證</strong>：客戶端驗證伺服器證書</li>
<li><strong>金鑰交換</strong>：使用非對稱加密建立共享密鑰</li>
<li><strong>完成握手</strong>：雙方使用對稱加密保護後續通訊</li>
</ol>
</li>
<li><strong>加密類型</strong>：
<ul>
<li><strong>對稱加密</strong>：AES、ChaCha20 等，用於資料傳輸</li>
<li><strong>非對稱加密</strong>：RSA、ECC，用於金鑰交換</li>
<li><strong>雜湊函數</strong>：SHA-256、SHA-384，用於訊息完整性</li>
</ul>
</li>
<li><strong>TLS 版本演進</strong>：
<ul>
<li><strong>TLS 1.0/1.1</strong>：已棄用，存在安全漏洞</li>
<li><strong>TLS 1.2</strong>：目前廣泛使用，支援多種加密套件</li>
<li><strong>TLS 1.3</strong>：最新版本，大幅改進安全性和效能</li>
</ul>
</li>
<li><strong>Perfect Forward Secrecy (PFS)</strong>：即使私鑰洩露，之前的通訊仍安全</li>
<li><strong>TLS 1.3 改進</strong>：
<ul>
<li>減少握手往返次數（1-RTT）</li>
<li>移除不安全的加密算法</li>
<li>握手加密</li>
<li>0-RTT 恢復功能（權衡安全性與性能）</li>
</ul>
</li>
<li><strong>證書驗證機制</strong>：
<ul>
<li><strong>證書鏈</strong>：根 CA → 中間 CA → 終端實體證書</li>
<li><strong>CRL (Certificate Revocation List)</strong>：憑證撤銷清單</li>
<li><strong>OCSP (Online Certificate Status Protocol)</strong>：線上憑證狀態協定</li>
<li><strong>SNI (Server Name Indication)</strong>：支援單一 IP 多域名證書</li>
</ul>
</li>
<li><strong>安全增強功能</strong>：
<ul>
<li><strong>HSTS (HTTP Strict Transport Security)</strong>：強制瀏覽器使用 HTTPS</li>
<li><strong>Certificate Pinning</strong>：證書釘選，防止憑證攻擊</li>
</ul>
</li>
</ul>
<h1 id="ssh-secure-shell">SSH (Secure Shell)</h1>
<ul>
<li><strong>SSH 版本差異</strong>：
<ul>
<li><strong>SSH-1</strong>：已棄用，存在安全漏洞</li>
<li><strong>SSH-2</strong>：目前標準版本，安全性大幅改善</li>
</ul>
</li>
<li><strong>認證方式</strong>：
<ul>
<li><strong>密碼認證</strong>：簡單但安全性較低</li>
<li><strong>公鑰認證</strong>：高安全性，使用密鑰對</li>
<li><strong>雙因素認證</strong>：結合密鑰和密碼/驗證碼</li>
</ul>
</li>
<li><strong>密鑰類型比較</strong>：
<ul>
<li><strong>RSA</strong>：傳統算法，密鑰長度 2048/4096 bits</li>
<li><strong>DSA</strong>：已不推薦使用</li>
<li><strong>ECDSA</strong>：橢圓曲線算法，較短密鑰長度</li>
<li><strong>Ed25519</strong>：新一代橢圓曲線算法，推薦使用</li>
</ul>
</li>
<li><strong>連接建立流程</strong>：
<ol>
<li>TCP 連接建立（預設端口 22）</li>
<li>協議版本協商</li>
<li>演算法協商</li>
<li>金鑰交換</li>
<li>用戶認證</li>
</ol>
</li>
<li><strong>主機身份驗證</strong>：
<ul>
<li><strong>known_hosts 檔案</strong>：儲存已知主機的公鑰指紋</li>
<li><strong>主機密鑰檢查</strong>：防止中間人攻擊</li>
<li><strong>首次連接警告</strong>：新主機連接時的安全提示</li>
</ul>
</li>
<li><strong>SSH 隧道</strong>：
<ul>
<li><strong>本地轉發</strong>：-L 選項，將本地端口轉發到遠端</li>
<li><strong>遠程轉發</strong>：-R 選項，將遠端端口轉發到本地</li>
<li><strong>動態轉發</strong>：-D 選項，建立 SOCKS 代理</li>
</ul>
</li>
<li><strong>SSH 配置與管理</strong>：
<ul>
<li><code>~/.ssh/config</code> 文件配置</li>
<li>主機別名設定</li>
<li>密鑰管理與 ssh-agent</li>
<li>連接池和復用 (ControlMaster)</li>
<li>免密碼登入設定</li>
</ul>
</li>
</ul>
<h1 id="ipsec-internet-protocol-security">IPSec (Internet Protocol Security)</h1>
<ul>
<li><strong>協議組件</strong>：
<ul>
<li><strong>AH (Authentication Header)</strong>：僅提供認證和完整性，不加密</li>
<li><strong>ESP (Encapsulating Security Payload)</strong>：提供認證、完整性和加密</li>
</ul>
</li>
<li><strong>運行模式</strong>：
<ul>
<li><strong>傳輸模式</strong>：僅加密 IP 封包的負載，保留原始 IP 標頭</li>
<li><strong>隧道模式</strong>：加密整個 IP 封包並添加新的 IP 標頭</li>
</ul>
</li>
<li><strong>安全關聯 (SA)</strong>：定義加密算法、密鑰和安全參數</li>
<li><strong>IKE (Internet Key Exchange)</strong>：
<ul>
<li><strong>IKEv1</strong>：傳統版本，較複雜的協商過程</li>
<li><strong>IKEv2</strong>：改進版本，更簡潔且支援移動性</li>
<li><strong>第一階段</strong>：建立 ISAKMP SA，保護第二階段</li>
<li><strong>第二階段</strong>：建立 IPSec SA</li>
</ul>
</li>
<li><strong>NAT 穿透</strong>：
<ul>
<li><strong>NAT-T (NAT Traversal)</strong>：解決 NAT 環境下的 IPSec 連接問題</li>
<li><strong>UDP 封裝</strong>：將 ESP 封包封裝在 UDP 中通過 NAT</li>
</ul>
</li>
<li><strong>實際應用</strong>：
<ul>
<li><strong>站點對站點 VPN</strong>：連接不同辦公室網路</li>
<li><strong>遠程訪問 VPN</strong>：員工在外部存取公司網路</li>
<li><strong>L2TP/IPSec VPN</strong>：結合 L2TP 隧道和 IPSec 加密</li>
</ul>
</li>
<li><strong>配置考量</strong>：
<ul>
<li><strong>加密算法選擇</strong>：AES、3DES 等對稱加密</li>
<li><strong>認證方式</strong>：PSK (Pre-Shared Key) 或憑證</li>
<li><strong>完整性驗證</strong>：SHA-1、SHA-256 等雜湊算法</li>
</ul>
</li>
</ul>

        </section>
        <div class="post-tags">
          
          
          <nav class="nav tags">
            <ul class="tags">
              
              <li><a href="/tags/protocol">protocol</a></li>
              
            </ul>
          </nav>
          
          
        </div>
      </div>

      
      
    </div>

    </article>
</main>
<footer>
  <div class="footer_nav">
    
  </div>

  
  
    
      <a class="soc" href="https://github.com/peihe07" title="github">
        <i data-feather="github"></i>
      </a> | 
    
      <a class="soc" href="mailto:y450376@gmail.com" title="email">
        <i data-feather="mail"></i>
      </a> | 
    
      <a class="soc" href="https://medium.com/@peihe07" title="medium">
        <i data-feather="book-open"></i>
      </a>
    
  

  ⚡️ 2025
   Peihe | 
  <a href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
</footer>


  <script>
    feather.replace();
  </script>
</div>
    </body>
</html>